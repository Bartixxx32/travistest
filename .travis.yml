sudo: required
dist: trusty
language: bash
jobs:
  include:
    - stage: ob1
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_004_all_1801031407_e2352bc7493e4d48.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob1.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob1.zip https://transfer.sh/ob1.zip
      - curl --upload-file ./ob1.z01 https://transfer.sh/ob1.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob2
      script:
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_005_all_1801141242_0c19acb91a7d402d.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob2.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob2.zip https://transfer.sh/ob2.zip
      - curl --upload-file ./ob2.z01 https://transfer.sh/ob2.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob3
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_006_all_1801292042_0848ac7a63b24cdd.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob3.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob3.zip https://transfer.sh/ob3.zip
      - curl --upload-file ./ob3.z01 https://transfer.sh/ob3.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob4
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_007_all_1803102230_5d5e5899febf4c9c.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob4.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob4.zip https://transfer.sh/ob4.zip
      - curl --upload-file ./ob4.z01 https://transfer.sh/ob4.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob5
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_008_all_1803250051_30ce618e28474fd8.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob5.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob5.zip https://transfer.sh/ob5.zip
      - curl --upload-file ./ob5.z01 https://transfer.sh/ob5.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob6
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_010_all_1804112056_629d3ed79d084775.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob6.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - ls
      - curl --upload-file ./ob6.zip https://transfer.sh/ob6.zip
      - curl --upload-file ./ob6.z01 https://transfer.sh/ob6.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob7
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_011_all_1804241056_a51d076815af4ea9.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob7.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob7.zip https://transfer.sh/ob7.zip
      - curl --upload-file ./ob7.z01 https://transfer.sh/ob7.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
    - stage: ob8
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_012_all_1805141050_84f43f7d02ff4c08.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - sudo rm -r app/Chrome/Chrome.apk
      - cd app/Chrome
      - sudo touch "removed +100mb.txt"
      - cd ../..
      - sudo zip -r ob8.zip -s 1000m *
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - curl --upload-file ./ob8.zip https://transfer.sh/ob8.zip
      - curl --upload-file ./ob8.z01 https://transfer.sh/ob8.z01
      - echo .
      - echo .
      - echo .
      - echo .
      - echo .
      - echo done
  addons:
    apt:
      update: true
      packages:
    - zip
    - unzip
    - ncftp
    - p7zip-full
    

notifications:
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify
