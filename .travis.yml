sudo: required
dist: xenial

language: bash
jobs:
  include:
    - stage: ob1
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_004_all_1801031407_e2352bc7493e4d48.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob1.zip -s 1000m *
      - transfer ./ob1.zip
      - transfer ./ob1.z01
      - echo done
    - stage: ob2
      script:
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_005_all_1801141242_0c19acb91a7d402d.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob2.zip -s 1000m *
      - transfer ./ob2.zip 
      - transfer ./ob2.z01 
      - echo done
    - stage: ob3
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_006_all_1801292042_0848ac7a63b24cdd.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob3.zip -s 1000m *
      - transfer ./ob3.zip
      - transfer ./ob3.z01
      - echo done
    - stage: ob4
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_007_all_1803102230_5d5e5899febf4c9c.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip 
      - cd ../..
      - sudo zip -r ob4.zip -s 1000m *
      - transfer ./ob4.zip
      - transfer ./ob4.z01
      - echo done
    - stage: ob5
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_008_all_1803250051_30ce618e28474fd8.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip 
      - cd ../..
      - sudo zip -r ob5.zip -s 1000m *
      - transfer ./ob5.zip
      - transfer ./ob5.z01
      - echo done
    - stage: ob6
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_010_all_1804112056_629d3ed79d084775.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip  
      - cd ../..
      - sudo zip -r ob6.zip -s 1000m *
      - ls
      - transfer ./ob6.zip
      - transfer ./ob6.z01
      - echo done
    - stage: ob7
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_011_all_1804241056_a51d076815af4ea9.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip  
      - cd ../..
      - sudo zip -r ob7.zip -s 1000m *
      - transfer ./ob7.zip 
      - transfer ./ob7.z01 
      - echo done
    - stage: ob8
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_012_all_1805141050_84f43f7d02ff4c08.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip  
      - cd ../..
      - sudo zip -r ob8.zip -s 1000m *
      - transfer ./ob8.zip 
      - transfer ./ob8.z01 
      - echo done
    - stage: ob9
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_013_all_1805241623_307e5a9d38ed49fe.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob9.zip -s 1000m *
      - transfer ./ob9.zip 
      - transfer ./ob9.z01 
      - echo done
    - stage: ob10
      script: 
      - wget http://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.X.14_GLO_014_1806141245/OnePlus5TOxygen_43_OTA_014_all_1806141245_692dcbc329.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob10.zip -s 1000m *
      - transfer ./ob10.zip 
      - transfer ./ob10.z01 
      - echo done
    - stage: ob11
      script: 
      - wget http://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.15_GLO_015_1807031556/OnePlus5TOxygen_43_OTA_015_all_1807031556_1637f29ff.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob11.zip -s 1000m *
      - transfer ./ob11.zip
      - transfer ./ob11.z01
      - echo done
    - stage: ob12
      script: 
      - wget http://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.16_GLO_016_1807160203/OnePlus5TOxygen_43_OTA_016_all_1807160203_4597427b.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob12.zip -s 1000m *
      - transfer ./ob12.zip 
      - transfer ./ob12.z01 
      - echo done
    - stage: ob13
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_017_all_1808011631_e26732cc6b274db6.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob13.zip -s 1000m *
      - transfer ./ob13.zip 
      - transfer ./ob13.z01 
      - echo done 
    - stage: ob14
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_018_all_1808100217_94eadcd0caca45df.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob14.zip -s 1000m *
      - transfer ./ob14.zip
      - transfer ./ob14.z01
      - echo done
    - stage: ob15
      script: 
      - wget http://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.19_GLO_019_1808290116/OnePlus5TOxygen_43_OTA_019_all_1808290116_4ce953e3e8518c.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob15.zip -s 1000m *
      - transfer ./ob15.zip
      - transfer ./ob15.z01
      - echo done
    - stage: ob16
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_020_all_1809110002_19ae59df7e354a31.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob16.zip -s 1000m *
      - transfer ./ob16.zip
      - transfer ./ob16.z01
      - echo done
    - stage: ob17
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_021_all_1809201145_575e905dfd204bcc.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob17.zip -s 1000m *
      - transfer ./ob17.zip
      - transfer ./ob17.z01
      - echo done
    - stage: ob18
      script: 
      - wget http://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.22_GLO_022_1810102008/OnePlus5TOxygen_43_OTA_022_all_1810102008_742072e536a2d5c.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob18.zip -s 1000m *
      - transfer ./ob18.zip 
      - transfer ./ob18.z01 
      - echo done
    - stage: ob19
      script: 
      - wget https://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.23_GLO_023_1810250103/OnePlus5TOxygen_43_OTA_023_all_1810250103_7c2c2665682a.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip 
      - cd ../..
      - sudo zip -r ob19.zip -s 1000m *
      - transfer ./ob19.zip 
      - transfer ./ob19.z01 
      - echo done
    - stage: ob20
      script: 
      - wget https://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.26_GLO_026_1812052331/OnePlus5TOxygen_43_OTA_026_all_1812052331_d9e594c.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip  
      - cd ../..
      - sudo zip -r ob20.zip -s 1000m *
      - transfer ./ob20.zip
      - transfer ./ob20.z01
      - echo done
    - stage: ob21
      script: 
      - wget https://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.27_GLO_027_1812181341/OnePlus5TOxygen_43_OTA_027_all_1812181341_899e19d0.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip    
      - cd ../..
      - sudo zip -r ob21.zip -s 1000m *
      - transfer ./ob21.zip
      - transfer ./ob21.z01
      - echo done
    - stage: ob22
      script: 
      - wget https://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.32_GLO_032_1812240018/OnePlus5TOxygen_43_OTA_032_all_1812240018_5dbad171.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip 
      - cd ../..
      - sudo zip -r ob22.zip -s 1000m *
      - transfer ./ob22.zip
      - transfer ./ob22.z01
      - echo done
    - stage: ob23
      script: 
      - wget http://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.34_GLO_034_1901140045/OnePlus5TOxygen_43_OTA_034_all_1901140045_02d9112732.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob23.zip -s 1000m *
      - transfer ./ob23.zip
      - transfer ./ob23.z01
      - echo done
    - stage: ob24
      script: 
      - wget http://oxygenos.oneplus.net.s3.amazonaws.com/OnePlus5TOxygen_43_OTA_037_all_1902141756_5dbd535d24c74105.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob24.zip -s 1000m *
      - transfer ./ob24.zip
      - transfer ./ob24.z01
      - echo done
    - stage: ob25
      script: 
      - wget http://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.38_GLO_038_1902251921/OnePlus5TOxygen_43_OTA_038_all_1902251921_f2da623eaac4.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob25.zip -s 1000m *
      - transfer ./ob25.zip
      - transfer ./ob25.z01
      - echo done
    - stage: ob26
      script: 
      - wget https://otafsg1.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.40_GLO_040_1903110005/OnePlus5TOxygen_43_OTA_040_all_1903110005_51ca04eb43ab.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob26.zip -s 1000m *
      - transfer ./ob25.zip
      - transfer ./ob25.z01
      - echo done
    - stage: ob27
      script: 
      - wget https://otafsg.h2os.com/patch/amazone2/GLO/OnePlus5TOxygen/OnePlus5TOxygen_43.T.42_GLO_042_1903242148/OnePlus5TOxygen_43_OTA_042_all_1903242148_2067fb1.zip -O one.zip
      - unzip one.zip
      - sudo rm -r one.zip
      - wget https://raw.githubusercontent.com/xpirt/sdat2img/master/sdat2img.py
      - chmod +x *
      - ./sdat2img.py system.transfer.list  system.new.dat
      - mkdir output
      - sudo mount -t ext4 -o loop system.img output/
      - sudo rm -r system.new.dat
      - mkdir zip
      - cd output
      - sudo mv * ../zip
      - cd ..
      - cd zip
      - cd ../..
      - sudo zip -r ob27.zip -s 1000m *
      - transfer ./ob25.zip
      - transfer ./ob25.z01
      - echo done
   
    
 

addons:
  apt:
    packages:
    - zip
    - unzip
    - p7zip-full
    
  addons:
    apt:
      update: true 
  
addons:
  snaps:
    - transfer
    

notifications:
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify
